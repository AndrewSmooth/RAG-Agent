# ü§ñ RAG-Agent

–ü—Ä–æ—Å—Ç–æ–π –∏ –º–æ—â–Ω—ã–π Retrieval-Augmented Generation (RAG) –∞–≥–µ–Ω—Ç –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

---

–ö–æ–Ω–µ—á–Ω–æ! –í–æ—Ç –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∏ —Å—Ç–∏–ª–∏—Å—Ç–∏—á–µ—Å–∫–∏ –≤—ã—Ä–æ–≤–Ω–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –≤–∞—à–µ–≥–æ —Ä–∞–∑–¥–µ–ª–∞ ‚Äî —á—ë—Ç–∫–æ, —á–∏—Ç–∞–µ–º–æ –∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ:

---

## üöÄ –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

–°–ª–µ–¥—É–π—Ç–µ —ç—Ç–∏–º —à–∞–≥–∞–º, —á—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å **RAG-Agent + Aegra + UI** –ª–æ–∫–∞–ª—å–Ω–æ:

### 1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –∫–æ—Ä–Ω–µ–≤—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
```bash
cd aegra
```

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Å–µ—Ä–≤–∏—Å—ã –≤ Docker
```bash
docker compose up postgres chroma -d
```
> –≠—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç PostgreSQL (–¥–ª—è Aegra) –∏ ChromaDB (–¥–ª—è RAG) –≤ —Ñ–æ–Ω–µ.

### 3. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ Python-–æ–∫—Ä—É–∂–µ–Ω–∏–µ
```bash
source venv/bin/activate  # Linux/macOS
# –ò–ª–∏ –¥–ª—è Windows:
# venv\Scripts\activate
```

### 4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Aegra-—Å–µ—Ä–≤–µ—Ä
```bash
python run_server.py
```

### 5. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞ (–µ—Å–ª–∏ –Ω–µ —Ç–∞–º)
```bash
cd ..
```

### 6. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
```bash
sh ui_agent.sh
```
> UI –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: [`http://localhost:3000`](http://localhost:3000)

---

### üí° –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å RAG –≤ —á–∞—Ç–µ

- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫—É **¬´Upload file to KB¬ª**, —á—Ç–æ–±—ã –∑–∞–≥—Ä—É–∑–∏—Ç—å `.txt` –∏–ª–∏ `.md` —Ñ–∞–π–ª—ã –≤ –±–∞–∑—É –∑–Ω–∞–Ω–∏–π.
- –ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ **–∑–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å –≤ —á–∞—Ç–µ**, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ **`t2t`** (–Ω–∞–ø—Ä–∏–º–µ—Ä: *¬´t2t: —á—Ç–æ –Ω–∞–ø–∏—Å–∞–Ω–æ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ –æ –ø—Ä–æ–µ–∫—Ç–µ?¬ª*).
- –ê–≥–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç –ø–æ–∏—Å–∫ –ø–æ –≤–∞—à–µ–π –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π –∏ –≤–µ—Ä–Ω—ë—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–π –æ—Ç–≤–µ—Ç.

> üîí –ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ **text-to-text (T2T)** —Ä–µ–∂–∏–º. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ T2SQL –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–∑–∂–µ.

--- 

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∞—è –ª–æ–∫–∞–ª—å–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:  
**Aegra (–∞–≥–µ–Ω—Ç-–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä) + RAG (–±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π) + Agent Chat UI (—Ñ—Ä–æ–Ω—Ç–µ–Ω–¥)**.

## üèé –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ Rag

–°–ª–µ–¥—É–π—Ç–µ —ç—Ç–∏–º —à–∞–≥–∞–º, —á—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç –Ω–∞ —Å–≤–æ–µ–π –º–∞—à–∏–Ω–µ:

### 1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
```bash
cd rag
```

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ Docker Compose
```bash
docker compose up -d
```

### 3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ Python
```bash
python -m venv venv
source venv/bin/activate  # Linux/macOS
# –î–ª—è Windows: venv\Scripts\activate
```

### 4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```bash
pip install -r requirements.txt
```

### 5. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `rag/.env` —Å–æ —Å–ª–µ–¥—É—é—â–∏–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º:

```env
YANDEX_CLOUD_FOLDER=your_folder_id
YANDEX_CLOUD_API_KEY=your_api_key
```

> ‚ö†Ô∏è **–í–∞–∂–Ω–æ**: –ó–∞–º–µ–Ω–∏—Ç–µ `your_folder_id` –∏ `your_api_key` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –≤–∞—à–µ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ Yandex Cloud.

### 6. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∞–≥–µ–Ω—Ç–∞
```bash
python main.py --load-kb --query "<Your question>"
```

–ü—Ä–∏–º–µ—Ä:
```bash
python main.py --load-kb --query "–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç RAG?"
```

---

üí° **–°–æ–≤–µ—Ç**: –§–ª–∞–≥ `--load-kb` –∑–∞–≥—Ä—É–∂–∞–µ—Ç –±–∞–∑—É –∑–Ω–∞–Ω–∏–π –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ. –í –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö –µ–≥–æ –º–æ–∂–Ω–æ –æ–ø—É—Å—Ç–∏—Ç—å, –µ—Å–ª–∏ –±–∞–∑–∞ —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω–∞.


### üìö –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∞–≥–µ–Ω—Ç–∞ –≤—Å–µ —Ñ–∞–π–ª—ã –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `/knowledge_base` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω–¥–µ–∫—Å–∏—Ä—É—é—Ç—Å—è –∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ –≤–µ–∫—Ç–æ—Ä–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–∫–∏ `/knowledge_base`:

```
/knowledge_base
‚îú‚îÄ‚îÄ docs/          # –û–ø–∏—Å–∞–Ω–∏–µ —Å—Ö–µ–º—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–≤ —Ñ–æ—Ä–º–∞—Ç–µ .md)
‚îú‚îÄ‚îÄ sql_examples/  # –ü—Ä–∏–º–µ—Ä—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö SQL-–∑–∞–ø—Ä–æ—Å–æ–≤
‚îÇ                  # –ö–∞–∂–¥—ã–π —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–∞—Ä—É: 
‚îÇ                  # - —Ç–µ–∫—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (natural language)
‚îÇ                  # - –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π SQL-–∑–∞–ø—Ä–æ—Å –≤ –æ—Ç–≤–µ—Ç
‚îî‚îÄ‚îÄ t2t_docs/      # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ Markdown (.md –∏–ª–∏ .txt) –¥–ª—è text-to-text –æ–±—Ä–∞–±–æ—Ç–∫–∏
```

> üí° **–°–æ–≤–µ—Ç**: –ß—Ç–æ–±—ã —Ä–∞—Å—à–∏—Ä–∏—Ç—å –∑–Ω–∞–Ω–∏—è –∞–≥–µ–Ω—Ç–∞ ‚Äî –ø—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–æ–¥–ø–∞–ø–∫–∏. –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—É—Å–∫–µ —Å —Ñ–ª–∞–≥–æ–º `--load-kb` –æ–Ω–∏ –±—É–¥—É—Ç —É—á—Ç–µ–Ω—ã.


# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
![img.png](img.png)